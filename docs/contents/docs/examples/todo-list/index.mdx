---
title: Todo List Example
description: Interactive todo list showcasing Mesa's fine-grained reactivity with visual render indicators.
---

This example demonstrates Mesa's fine-grained reactivity through an interactive todo list application. Each component includes visual indicators showing when re-renders occur, making Mesa's performance benefits clearly visible.

## ðŸš€ Live Playground

Experience Mesa's fine-grained reactivity in action:

<div style={{ textAlign: "center", margin: "24px 0" }}>
  <a
    href="/examples/todo-list/play"
    style={{
      display: "inline-block",
      background: "linear-gradient(135deg, #667eea 0%, #764ba2 100%)",
      color: "white",
      padding: "12px 24px",
      borderRadius: "8px",
      textDecoration: "none",
      fontWeight: "600",
      boxShadow: "0 4px 12px rgba(0,0,0,0.15)",
      transition: "all 0.3s ease",
    }}
    className="playground-button"
  >
    ðŸŽ® Open Interactive Playground â†’
  </a>
</div>

Watch render indicators flash in real-time as you interact with the todo list. Each component shows exactly when it re-renders, demonstrating Mesa's surgical precision.

## Live Interactive Example

Here's a complete todo list application with render visualization:

```jsx live
import React, { useState, useRef, useEffect } from "react";
import { proxy, useStore } from "mesa";

// Create reactive state
const todoState = proxy({
  todos: [
    { id: 1, text: "Learn Mesa", completed: false, priority: "high" },
    { id: 2, text: "Build awesome app", completed: false, priority: "medium" },
    { id: 3, text: "Share with community", completed: false, priority: "low" },
  ],
  filter: "all", // 'all', 'active', 'completed'
  newTodoText: "",
  stats: {
    total: 3,
    completed: 0,
    active: 3,
  },
});

// Visual render indicator component
function RenderIndicator({ componentName, color = "#3b82f6" }) {
  const [renderCount, setRenderCount] = useState(0);
  const [isFlashing, setIsFlashing] = useState(false);
  const timeoutRef = useRef();

  useEffect(() => {
    setRenderCount((prev) => prev + 1);
    setIsFlashing(true);

    clearTimeout(timeoutRef.current);
    timeoutRef.current = setTimeout(() => {
      setIsFlashing(false);
    }, 300);

    return () => clearTimeout(timeoutRef.current);
  });

  return (
    <div
      className={`render-indicator ${isFlashing ? "flashing" : ""}`}
      style={{
        position: "absolute",
        top: "4px",
        right: "4px",
        background: isFlashing ? color : "rgba(156, 163, 175, 0.3)",
        color: "white",
        padding: "2px 6px",
        borderRadius: "12px",
        fontSize: "10px",
        fontWeight: "bold",
        transition: "all 0.3s ease",
        zIndex: 10,
      }}
    >
      {componentName}: {renderCount}
    </div>
  );
}

// Todo item component
function TodoItem({ todo }) {
  const todoData = useStore(todoState, (s) => s.todos.find((t) => t.id === todo.id));

  if (!todoData) return null;

  const toggleComplete = () => {
    const todoIndex = todoState.todos.findIndex((t) => t.id === todo.id);
    if (todoIndex !== -1) {
      todoState.todos[todoIndex].completed = !todoState.todos[todoIndex].completed;
      updateStats();
    }
  };

  const deleteTodo = () => {
    todoState.todos = todoState.todos.filter((t) => t.id !== todo.id);
    updateStats();
  };

  const updateText = (newText) => {
    const todoIndex = todoState.todos.findIndex((t) => t.id === todo.id);
    if (todoIndex !== -1) {
      todoState.todos[todoIndex].text = newText;
    }
  };

  const updatePriority = (newPriority) => {
    const todoIndex = todoState.todos.findIndex((t) => t.id === todo.id);
    if (todoIndex !== -1) {
      todoState.todos[todoIndex].priority = newPriority;
    }
  };

  const priorityColors = {
    high: "#ef4444",
    medium: "#f59e0b",
    low: "#10b981",
  };

  return (
    <div
      className={`todo-item ${todoData.completed ? "completed" : ""}`}
      style={{
        position: "relative",
        padding: "12px",
        margin: "8px 0",
        border: "1px solid #e5e7eb",
        borderRadius: "8px",
        background: todoData.completed ? "#f9fafb" : "white",
        display: "flex",
        alignItems: "center",
        gap: "12px",
        opacity: todoData.completed ? 0.7 : 1,
      }}
    >
      <RenderIndicator componentName={`Item-${todo.id}`} color={priorityColors[todoData.priority]} />

      <input type="checkbox" checked={todoData.completed} onChange={toggleComplete} style={{ cursor: "pointer" }} />

      <input
        type="text"
        value={todoData.text}
        onChange={(e) => updateText(e.target.value)}
        style={{
          flex: 1,
          border: "none",
          background: "transparent",
          textDecoration: todoData.completed ? "line-through" : "none",
          fontSize: "14px",
        }}
      />

      <select
        value={todoData.priority}
        onChange={(e) => updatePriority(e.target.value)}
        style={{
          padding: "4px 8px",
          borderRadius: "4px",
          border: "1px solid #d1d5db",
          background: priorityColors[todoData.priority],
          color: "white",
          fontSize: "12px",
        }}
      >
        <option value="high">High</option>
        <option value="medium">Medium</option>
        <option value="low">Low</option>
      </select>

      <button
        onClick={deleteTodo}
        style={{
          background: "#ef4444",
          color: "white",
          border: "none",
          borderRadius: "4px",
          padding: "4px 8px",
          cursor: "pointer",
          fontSize: "12px",
        }}
      >
        Delete
      </button>
    </div>
  );
}

// Todo list display component
function TodoList() {
  const todos = useStore(todoState, (s) => s.todos);
  const filter = useStore(todoState, (s) => s.filter);

  const filteredTodos = todos.filter((todo) => {
    if (filter === "active") return !todo.completed;
    if (filter === "completed") return todo.completed;
    return true;
  });

  return (
    <div style={{ position: "relative", minHeight: "200px" }}>
      <RenderIndicator componentName="TodoList" color="#8b5cf6" />

      <div style={{ padding: "16px" }}>
        {filteredTodos.length === 0 ? (
          <div
            style={{
              textAlign: "center",
              color: "#6b7280",
              padding: "20px",
            }}
          >
            {filter === "active" && "No active todos"}
            {filter === "completed" && "No completed todos"}
            {filter === "all" && "No todos yet"}
          </div>
        ) : (
          filteredTodos.map((todo) => <TodoItem key={todo.id} todo={todo} />)
        )}
      </div>
    </div>
  );
}

// Add new todo component
function AddTodo() {
  const newTodoText = useStore(todoState, (s) => s.newTodoText);

  const addTodo = () => {
    if (newTodoText.trim()) {
      const newTodo = {
        id: Date.now(),
        text: newTodoText.trim(),
        completed: false,
        priority: "medium",
      };
      todoState.todos.push(newTodo);
      todoState.newTodoText = "";
      updateStats();
    }
  };

  const handleKeyPress = (e) => {
    if (e.key === "Enter") {
      addTodo();
    }
  };

  return (
    <div style={{ position: "relative", padding: "16px" }}>
      <RenderIndicator componentName="AddTodo" color="#059669" />

      <div style={{ display: "flex", gap: "8px" }}>
        <input
          type="text"
          value={newTodoText}
          onChange={(e) => (todoState.newTodoText = e.target.value)}
          onKeyPress={handleKeyPress}
          placeholder="Add a new todo..."
          style={{
            flex: 1,
            padding: "8px 12px",
            border: "1px solid #d1d5db",
            borderRadius: "6px",
            fontSize: "14px",
          }}
        />
        <button
          onClick={addTodo}
          disabled={!newTodoText.trim()}
          style={{
            padding: "8px 16px",
            background: newTodoText.trim() ? "#3b82f6" : "#9ca3af",
            color: "white",
            border: "none",
            borderRadius: "6px",
            cursor: newTodoText.trim() ? "pointer" : "not-allowed",
            fontSize: "14px",
            fontWeight: "bold",
          }}
        >
          Add Todo
        </button>
      </div>
    </div>
  );
}

// Filter controls component
function FilterControls() {
  const filter = useStore(todoState, (s) => s.filter);

  const filters = [
    { value: "all", label: "All" },
    { value: "active", label: "Active" },
    { value: "completed", label: "Completed" },
  ];

  return (
    <div style={{ position: "relative", padding: "16px" }}>
      <RenderIndicator componentName="Filters" color="#dc2626" />

      <div style={{ display: "flex", gap: "8px", justifyContent: "center" }}>
        {filters.map((f) => (
          <button
            key={f.value}
            onClick={() => (todoState.filter = f.value)}
            style={{
              padding: "6px 12px",
              background: filter === f.value ? "#3b82f6" : "transparent",
              color: filter === f.value ? "white" : "#374151",
              border: "1px solid #d1d5db",
              borderRadius: "6px",
              cursor: "pointer",
              fontSize: "13px",
            }}
          >
            {f.label}
          </button>
        ))}
      </div>
    </div>
  );
}

// Statistics component
function TodoStats() {
  const stats = useStore(todoState, (s) => s.stats);

  return (
    <div style={{ position: "relative", padding: "16px" }}>
      <RenderIndicator componentName="Stats" color="#7c3aed" />

      <div
        style={{
          display: "flex",
          justifyContent: "space-around",
          background: "#f3f4f6",
          padding: "12px",
          borderRadius: "8px",
          fontSize: "14px",
        }}
      >
        <div style={{ textAlign: "center" }}>
          <div style={{ fontWeight: "bold", color: "#374151" }}>{stats.total}</div>
          <div style={{ color: "#6b7280" }}>Total</div>
        </div>
        <div style={{ textAlign: "center" }}>
          <div style={{ fontWeight: "bold", color: "#059669" }}>{stats.active}</div>
          <div style={{ color: "#6b7280" }}>Active</div>
        </div>
        <div style={{ textAlign: "center" }}>
          <div style={{ fontWeight: "bold", color: "#dc2626" }}>{stats.completed}</div>
          <div style={{ color: "#6b7280" }}>Completed</div>
        </div>
      </div>
    </div>
  );
}

// Bulk actions component
function BulkActions() {
  const todos = useStore(todoState, (s) => s.todos);
  const hasActiveTodos = todos.some((todo) => !todo.completed);
  const hasCompletedTodos = todos.some((todo) => todo.completed);

  const completeAll = () => {
    todoState.todos.forEach((todo, index) => {
      if (!todo.completed) {
        todoState.todos[index].completed = true;
      }
    });
    updateStats();
  };

  const clearCompleted = () => {
    todoState.todos = todoState.todos.filter((todo) => !todo.completed);
    updateStats();
  };

  return (
    <div style={{ position: "relative", padding: "16px" }}>
      <RenderIndicator componentName="BulkActions" color="#f59e0b" />

      <div style={{ display: "flex", gap: "8px", justifyContent: "center" }}>
        <button
          onClick={completeAll}
          disabled={!hasActiveTodos}
          style={{
            padding: "8px 12px",
            background: hasActiveTodos ? "#10b981" : "#9ca3af",
            color: "white",
            border: "none",
            borderRadius: "6px",
            cursor: hasActiveTodos ? "pointer" : "not-allowed",
            fontSize: "13px",
          }}
        >
          Complete All
        </button>
        <button
          onClick={clearCompleted}
          disabled={!hasCompletedTodos}
          style={{
            padding: "8px 12px",
            background: hasCompletedTodos ? "#ef4444" : "#9ca3af",
            color: "white",
            border: "none",
            borderRadius: "6px",
            cursor: hasCompletedTodos ? "pointer" : "not-allowed",
            fontSize: "13px",
          }}
        >
          Clear Completed
        </button>
      </div>
    </div>
  );
}

// Helper function to update stats
function updateStats() {
  const total = todoState.todos.length;
  const completed = todoState.todos.filter((todo) => todo.completed).length;
  const active = total - completed;

  todoState.stats = { total, completed, active };
}

// Main app component
function TodoApp() {
  useEffect(() => {
    updateStats();
  }, []);

  return (
    <div
      style={{
        maxWidth: "600px",
        margin: "0 auto",
        fontFamily: "system-ui, sans-serif",
      }}
    >
      <div
        style={{
          position: "relative",
          background: "white",
          borderRadius: "12px",
          boxShadow: "0 4px 6px rgba(0, 0, 0, 0.1)",
          overflow: "hidden",
          margin: "20px 0",
        }}
      >
        <RenderIndicator componentName="TodoApp" color="#1f2937" />

        <div
          style={{
            background: "linear-gradient(135deg, #667eea 0%, #764ba2 100%)",
            color: "white",
            padding: "20px",
            textAlign: "center",
          }}
        >
          <h1 style={{ margin: 0, fontSize: "24px" }}>Mesa Todo List</h1>
          <p style={{ margin: "8px 0 0 0", opacity: 0.9, fontSize: "14px" }}>
            Watch the render indicators to see Mesa's fine-grained updates!
          </p>
        </div>

        <TodoStats />
        <AddTodo />
        <FilterControls />
        <TodoList />
        <BulkActions />
      </div>

      <div
        style={{
          background: "#f9fafb",
          border: "1px solid #e5e7eb",
          borderRadius: "8px",
          padding: "16px",
          fontSize: "13px",
          color: "#6b7280",
        }}
      >
        <h3 style={{ margin: "0 0 8px 0", color: "#374151" }}>ðŸŽ¯ Render Tracking Guide</h3>
        <ul style={{ margin: 0, paddingLeft: "20px" }}>
          <li>
            <strong>Colored badges</strong> show component names and render counts
          </li>
          <li>
            <strong>Flashing effect</strong> indicates when a component re-renders
          </li>
          <li>
            <strong>Try these actions</strong> to see fine-grained updates:
            <ul style={{ marginTop: "4px" }}>
              <li>Toggle a todo â†’ Only that item re-renders</li>
              <li>Change filter â†’ Only TodoList re-renders</li>
              <li>Add todo â†’ Only AddTodo and Stats re-render</li>
              <li>Edit todo text â†’ Only that specific item re-renders</li>
            </ul>
          </li>
        </ul>
      </div>
    </div>
  );
}

export default TodoApp;
```

## Visual Render Tracking

This example includes a built-in render tracking system that makes Mesa's performance benefits visible:

### Render Indicators

Each component displays a colored badge showing:

- **Component name** and **render count**
- **Flashing animation** when re-renders occur
- **Color coding** by component type

### Fine-Grained Update Patterns

Watch the render indicators when you:

1. **Toggle Todo Completion**

   ```jsx
   // Only the specific TodoItem re-renders
   todoState.todos[0].completed = !todoState.todos[0].completed;
   ```

2. **Change Filter**

   ```jsx
   // Only TodoList and FilterControls re-render
   todoState.filter = "completed";
   ```

3. **Add New Todo**

   ```jsx
   // Only AddTodo and TodoStats re-render
   todoState.todos.push(newTodo);
   ```

4. **Edit Todo Text**

   ```jsx
   // Only the specific TodoItem re-renders
   todoState.todos[0].text = "Updated text";
   ```

5. **Update Priority**
   ```jsx
   // Only the specific TodoItem re-renders
   todoState.todos[0].priority = "high";
   ```

## Advanced Patterns Demonstrated

### 1. Nested Object Updates

```jsx
// Updates specific todo - only that TodoItem re-renders
todoState.todos[0].completed = true;

// Updates stats object - only TodoStats re-renders
todoState.stats = { total: 5, completed: 2, active: 3 };
```

### 2. Array Operations

```jsx
// Add item - TodoList re-renders to show new item
todoState.todos.push(newTodo);

// Remove item - TodoList re-renders to remove item
todoState.todos = todoState.todos.filter((t) => t.id !== targetId);

// Update item - only specific TodoItem re-renders
todoState.todos[index].text = "Updated";
```

### 3. Conditional Rendering

```jsx
function ConditionalTodos() {
  // Only re-renders when todos array length changes
  const hasTodos = useStore(todoState, (s) => s.todos.length > 0);

  // Only subscribes when hasTodos is true
  const firstTodo = useStore(todoState, (s) => (s.todos.length > 0 ? s.todos[0] : null));

  return hasTodos ? <div>First todo: {firstTodo?.text}</div> : <div>No todos yet</div>;
}
```

### 4. Computed Selectors

```jsx
function TodoSummary() {
  // Re-renders only when todos array changes
  const summary = useStore(todoState, (s) => {
    const total = s.todos.length;
    const completed = s.todos.filter((t) => t.completed).length;
    const highPriority = s.todos.filter((t) => t.priority === "high").length;

    return { total, completed, active: total - completed, highPriority };
  });

  return (
    <div>
      <div>Total: {summary.total}</div>
      <div>Completed: {summary.completed}</div>
      <div>Active: {summary.active}</div>
      <div>High Priority: {summary.highPriority}</div>
    </div>
  );
}
```

## Performance Comparison

### Without Mesa (Traditional State)

```jsx
// Every state change triggers ALL components to re-render
const [state, setState] = useState({
  todos: [],
  filter: "all",
  newTodoText: "",
  stats: { total: 0, completed: 0, active: 0 },
});

// Toggling one todo re-renders ENTIRE app
setState((prev) => ({
  ...prev,
  todos: prev.todos.map((todo) => (todo.id === targetId ? { ...todo, completed: !todo.completed } : todo)),
}));
```

### With Mesa

```jsx
// Only affected components re-render
const todoState = proxy({
  todos: [],
  filter: "all",
  newTodoText: "",
  stats: { total: 0, completed: 0, active: 0 },
});

// Only the specific TodoItem re-renders
todoState.todos[0].completed = !todoState.todos[0].completed;
```

## Testing with Mesa

```jsx
import { render, screen, fireEvent } from "@testing-library/react";
import { proxy, useStore } from "mesa";

describe("Todo List with Mesa", () => {
  let testTodoState;

  beforeEach(() => {
    testTodoState = proxy({
      todos: [{ id: 1, text: "Test todo", completed: false, priority: "medium" }],
      filter: "all",
    });
  });

  test("toggles todo completion", () => {
    function TestTodoItem() {
      const todo = useStore(testTodoState, (s) => s.todos[0]);
      return (
        <div>
          <input
            type="checkbox"
            checked={todo.completed}
            onChange={() => (testTodoState.todos[0].completed = !testTodoState.todos[0].completed)}
            data-testid="todo-checkbox"
          />
          <span data-testid="todo-text">{todo.text}</span>
        </div>
      );
    }

    render(<TestTodoItem />);

    const checkbox = screen.getByTestId("todo-checkbox");
    expect(checkbox).not.toBeChecked();

    fireEvent.click(checkbox);
    expect(checkbox).toBeChecked();
  });

  test("filters todos correctly", () => {
    testTodoState.todos.push({ id: 2, text: "Completed todo", completed: true, priority: "low" });

    function TestFilteredList() {
      const todos = useStore(testTodoState, (s) => s.todos);
      const filter = useStore(testTodoState, (s) => s.filter);

      const filteredTodos = todos.filter((todo) => {
        if (filter === "active") return !todo.completed;
        if (filter === "completed") return todo.completed;
        return true;
      });

      return (
        <div>
          {filteredTodos.map((todo) => (
            <div key={todo.id} data-testid={`todo-${todo.id}`}>
              {todo.text}
            </div>
          ))}
        </div>
      );
    }

    render(<TestFilteredList />);

    // All todos visible initially
    expect(screen.getByTestId("todo-1")).toBeInTheDocument();
    expect(screen.getByTestId("todo-2")).toBeInTheDocument();

    // Filter to active only
    testTodoState.filter = "active";
    expect(screen.getByTestId("todo-1")).toBeInTheDocument();
    expect(screen.queryByTestId("todo-2")).not.toBeInTheDocument();

    // Filter to completed only
    testTodoState.filter = "completed";
    expect(screen.queryByTestId("todo-1")).not.toBeInTheDocument();
    expect(screen.getByTestId("todo-2")).toBeInTheDocument();
  });
});
```

## CSS for Render Indicators

Add this CSS to your stylesheet for the flashing effect:

```css
.render-indicator.flashing {
  animation: flash 0.3s ease-in-out;
  transform: scale(1.1);
}

@keyframes flash {
  0% {
    opacity: 0.7;
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(1.15);
  }
  100% {
    opacity: 1;
    transform: scale(1.1);
  }
}

.todo-item {
  transition: all 0.2s ease;
}

.todo-item.completed {
  transform: scale(0.98);
}
```

This todo list example provides a comprehensive demonstration of Mesa's fine-grained reactivity, making performance benefits visually apparent through real-time render tracking.

## See Also

- **[Counter Example](/docs/examples/counter)** - Basic state management patterns
- **[Shopping Cart Example](/docs/examples/shopping-cart)** - Complex nested state management
- **[API Reference](/docs/api/proxy)** - Detailed API documentation
- **[Fine-Grained Reactivity](/docs/guides/fine-grained)** - Understanding the tracking system
